@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<ContentModels.Blog>
@using ContentModels = Umbraco.Cms.Web.Common.PublishedModels;
@{
	Layout = "Master.cshtml";
}


@{
	var selection = Umbraco.ContentAtRoot().FirstOrDefault()
    .Descendants()
    .OfType<BlogPost>()
    .Where(x => x.IsVisible())
    .OrderByDescending(x => x.CreateDate);
}

<main class="container my-4 my-md-5">

<header class="mb-4">
  <h1 class="h2">@Model.Title</h1>
  <span class="subheading">@Model.Subtitle</span>
</header>

<div class="row g-4">
  <!-- repeatable post cards -->
  	@foreach (var item in selection)
	{
        <div class="col-12 col-md-6 col-xl-4">
        <article class="card-clean h-100">
            <div class="p-4">
            <div class="d-flex gap-2 mb-2">
            @foreach(var category in item.Categories){
                <span class="chip">@category</span>
            }
            </div>
            <h2 class="h5"><a class="text-decoration-none text-reset" href="@item.Url()">@item.Title</a></h2>
            <p class="small text-muted-ink mb-3">@item.Preamble.</p>
            <div class="small text-muted-ink d-flex justify-content-between"><span>@item.PublishedOn.ToString("MMMM dd, yyyy")</span></div>
            </div>
        </article>
        </div>
	}
  
</div>
</main>